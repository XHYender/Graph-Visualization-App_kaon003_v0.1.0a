[开发者日志]

[2025/12/18]
-确定选题：基于tkinter的窗口程序：每日任务节点软件程序。
-项目根基：直接继承自码者先前的图像学项目，有基于盯帧的动画刷新机制，你可以从极少的库引用和特色化注释看出这是个肉编项目。
-项目灵感：点与边的图的可视化；做个可交互动画，实现类似obsidian里有的那种节点之间的引力斥力效果；找不到好的自律小软件，于是想做一个
-项目特色：主要使用的是tkinter的canva组件，旨在自己设计风格化UI、三态按键、右键菜单等，自己设计与摸索这些基本组件，感受代码底层魅力（就是喜欢造轮子）。
-项目改进：没有选择pygame是因为还没学并且目前比较熟悉tkinter，可能后续进行代码翻新会进行大改。
-内嵌了一个基于fabrik的limb、及适配的二阶系统运动拟合，仅仅只是因为好玩。
-已基本完成程序窗口与图形渲染框架的搭建，并整理了原项目的代码结构，加强了面向对象的思想（其实是把类当文件夹用）。
-TODO来自头脑风暴，后续视难易程度进行适当增删。

///DONE///
Vector类、Mode类、Framework类、Limb类、SOS类
可运行的半成品DisciplineAPP类
鼠标位置实时读取
<ESC>关闭窗口
<S>切换场景：['for limbs','for points']
<Space>切换test limb运动模式：['Fixed','Instant','SOS']
<F3>切换Info

///TODO///
F3菜单排版优化

。线(Line)：有向(起，末)，无向(两端)


右键菜单：
。节点(Node)：删除，点亮，熄灭，添加线条
编辑内容，更改图标，固定/活动，
。空(Null)：创建节点
。线：删除，设置方向(左，右，无)

左键：
。空：拖拽
单击节点：拉出详细卡片(查看任务详细，点亮)
。双击节点：直接点亮
。线：居中指向的节点(如果有向)

中键：
。单击：视角聚焦于鼠标（平滑动画
长按：可活动的节点吸引至鼠标

。有限大地图（应该好实现）

。存储json：节点，节点关系，节点位置，节点信息

存储菜单：存档选择、打开、更新、覆写、删除

。节点、线三态

节点详细卡片

节点引力斥力

节点的固定和活动

。基于delta_time的动画


[2025/12/20]

///DONE///	
三态TriStates类，Node(TriStates)类，Line(TriStates)类
绑定了鼠标左键、右键
在for nodes 场景下添加了
<C><右键>创建节点
添加了节点的三态绘制

///TODO///
。重写三态逻辑：
。改用鼠标指针的检测
。只允许同时选中单个对象
编辑节点文本采用非canva组件
others.

		
[2025/12/21]
-部分逻辑直接写在event绑定的函数下，后续回顾整理代码结构时需要斟酌考虑这些部分。
-经过合理考虑目前只打算保留单个存档
-才想起来保留历史版本，所以developer/history下的最早版本从22号的开始

///DONE///
已重写三态逻辑：
。改用鼠标指针的检测
。只允许同时选中单个对象
左键节点：节点的三态反馈绘制、拖拽移动、双击点亮/熄灭
<D>删除选中节点
右键节点，拖拽至另一：有向线的添加，完成了无法重复添加
邻接图的添加维护
线的低姿态、待姿态及绘制
<M>node场景下显示邻接图

///TODO///
。<D>删除线：邻接表的维护
。<D>删除节点同时删除相关线：遍历self.lines
。鼠标中键：拖拽画布以移动画布、点击节点以聚焦节点、点击单向线以聚焦target
。线三态：高姿态下可移动（同时移动sor和tar（应该好实现。。可以用self.temp_delta_for_move和line.vector实现相对固定））
。实现线的有向、无向(Rclick)、(双向)

添加其他能被左键拖动的元素，例如文本框
即文本框三态(基于Node，因为Node有text属性)，记住canva.create_text可以做到自动换行、对齐方式、获取文本框边界(可做背景)


[2025/12/22]

///DONE///
<D>删除线：邻接表的维护
<D>删除节点同时删除相关线：最终没有选择遍历self.lines，而是查找邻接表
给线类和节点类添加了id属性，邻接表也改成(sor:  tar:  line.id)的格式，并完善了维护方法
线三态：高姿态下可移动
实现线的翻转(左键双击)、无向(右键)


///TODO///
左键canva进行框选、多选功能(感觉较难因为会重写或者再写pointer selected)
<ctrl+C><ctrl+V>
<ctrl+Z><ctrl+Y>
。<ctrl+S><ctrl+R>
。存储json：节点，节点关系，节点位置，节点信息
。鼠标中键：拖拽画布以移动画布、点击节点以聚焦节点、点击单向线以聚焦target

添加文本框，三态(基于Node，因为Node有text属性)，记住canva.create_text可以做到自动换行、对齐方式，(可做背景)

基于delta_time的animation_layer


[2025/12/23]
-添加规则：日志中将用。标明已完成的TODO，并已维护往日的log。DONE不予变更。
-在每天的TODO中可适当添加一些TDD内容，以“关于...”的格式开头

///DONE///
鼠标中键：拖拽画布以移动画布、点击节点以聚焦节点、点击单向线以聚焦target
解决self.foucus_center的问题*
解决拖拽过程中禁用鼠标行为的问题*
修改：<S>切换场景
<ctrl+S>保存
<ctrl+R>读取
修复了一些bug

///TODO///
集体拖拽、尤其是用SOS时画面有撕裂，做双缓
保存读取多个文档
尝试自定义一个字体font文件（整活）

关于<ctrl+Z><ctrl+Y>：尝试独立一个事件描述系统，将所有的操作条例化并储存起来，使所有操作可逆化，且根据事件栈实现撤销与恢复
关于双缓：目前思路时pilow库把img加到整个gameloop中，或者尝试用创建两个canva做到双缓；还要/或者修改帧刷新机制通过适当降低帧率来保证完全绘制(现在是定帧刷新)
关于文本框的编辑：文本框的编辑考虑新弹出一个窗口用于输入文本

[2025/12/26]

///DONE///
编写了readme
帧数设置了45fps

///TODO///
。添加一个基于lines和adjoin graph创建带权重的adjoin graph with weights
。添加线性插值、二次插值、三次插值
添加事件系统，添加<~>控制台，学学正则表达式


[2026/1/9]
///DONE///
已成功改写focus动画为三次插值，并删除了原来SOS相关的插值。
（改用函数插值后性能大增，暂时放弃双缓。
<D>更新带权邻接表，<M>可以查看带权邻接表(手动更新)

///TODO///
添加文本框、文本框编辑(Text组件)、控制台、控制台输入(Entry组件)，用新弹窗的方式呈现。


[2026/1/10]
///DONE///
加入了子窗口，用于编辑node的text和title。为此改写了Framework类，分别用Entry和Text组件实现了title和text
鼠标移至node上的时候按下<T>可以打开编辑弹窗，鼠标的focus在主窗口上时按<T>可关闭弹窗。
鼠标focus在弹窗上的时候，按<Esc>/<Ctrl+T>/点击右上角叉可以关闭弹窗。
关闭弹窗的行为都会自动保存内部的文档。
改写了node高姿态、点亮的绘制，现在聚焦至节点、编辑节点文档的对应节点会有相应的绘制。(也是相同的绘制，共用了常态为None的属性temp_node_id_for_text_or_focus)
将点亮节点的操作改成了<左键>长按node超过0.8s且过程中不拖动节点。当左键释放的时候才完成点亮。
<W>更新带权邻接表

已添加文本框(textblank)及相关操作，我真是太强了
具体的明天再写吧，现在是2026/1/11/05点03分

///TODO///
寻路算法及可视化：BFS、DFS、Dijkstra、A*
物理引力模拟(已添加nodes_mode)
。在存档读档里加入textblanks和textblank_rods
<Ctrl+slide>缩放
写完README后可以找人测试
。nodes场景下fixed模式拖动线时textblank没有相对固定，要修

[2026/1/11]
///DONE///
已修复nodes场景下fixed模式拖动线时textblank没有相对固定的bug，以及重新打开文本框没有继承之前的文本框位置的bug
已改写存档读档，现在可以保存textblanks的信息了
修复了一些bug


///TODO///
文本框的相对位置的翻转(不能总让anchor在文本框的左上角)
animator类加在gameloop中用于制作动效，加在update和render之间.


[2026/1/12]
///DONE///
吧textblank的rod的limb的fabrik的循环次数改成了1，因为只有两个joint不需要太多次循环.
写完了演示存档.
修复了删除节点可能会出现的bug
更改了点亮节点的逻辑：长按0.5s即可，不需要释放.
新增全局变量FILE<str>，记录动态地址.

[2026/1/15]
///DONE///
添加了一个用于读文件的函数用来方便设置打开的存档